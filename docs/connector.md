##Установка коннектора в тестовом окружении
Для проверки работоспособности всего цикла обработки данных необходимо использовать следующие модули
1. bitcore - источник данных
1. rethinkdb - база данных для конечного клиента и для эмулятора цепочки
1. chain (chain_mock - для теста) - цепочка (эмулятор цепочки)
1. bitcore_connector - Коннектор транслирующий данные в цепочку и проверяющий данные содержащиеся в цепочке
1. rethink_projector - Проектор. Создаёт представление данных из цепочки в удобном для клиента виде.
1. state_monitor - Веб страница отображающая статус модулей узла

####Контейнеры модулей
Каждый модуль устанавливается, в виде докер контейнера.
Докерфайл для каждого модуля хранится в папке модуля. Невозможность вынести докерфайлы в папку install связана с архитектурными ограничениями докера.

####Конфигурация модулей
У каждого програмного модуля конфигурация лежит в файле config.json

`chain_mock/config.json` - позволяет изменить порт на котором будет висеть эмулятор цепи и настройки подключения к базе данных
`connector/bitcore/config.json` - содержит расположение инсайт интерфейса биткор, расположение цепочки имя юзера, расположение кливоллета и т.д. 
`rethink_projector/config.json` - содержит настройки подключения к базе данных
`state_monitor/config.json` - содержит настройки подключения ко всем модулям

####Скрипты установки
Для каждого модуля в папке install есть соответствующий короткий шелл скрипт. состоящий из нескольких команд для докера.
Шел скрипты с постфиксом рестарт предназначены для перезапуска контейнера без пересборки образа.

**Структура шел скрипта:**
1. Переход в папку с докерфайлом. Например: `cd ../connectors/bitcore`
2. Остановка старого контейнера.  Например: `docker stop bitcore_connector`
3. Удаление старого контейнера. Например: `docker rm -v bitcore_connector`
4. Удаление предыдущего докер образа.  Например: `docker rmi -f bitcore_connector`
5. Сборка образа по докерфайлу.  Например: `docker build -t bitcore_connector .`
6. Запуск контейнера.  Например: `docker run -d --net host --name bitcore_connector bitcore_connector`
7. Подсоединение к консоли контейнера (для просмотра оутпута).  Например: `docker attach --sig-proxy=false bitcore_connector`

####Скрипты установки для windows
Для запуска скриптов под windows достаточно поменять расширения шел скриптов с `.sh`  на `.bat`

##Установка
1. Клонируем гит репозиторий.
2. Вносим необходимые изменения в конфиг файлы.
3. Запускаем скрипты установки

Модули необходимо устанавливать в порядке указанном в начале этой документации.
Т.е. сначала устанавливается bitcore затем rethinkdb и далее програмные модули.
Для простоты установки добавлен шел скрипт install.sh который последовательно устанавливает все модули. И install_js.sh Который устанавливает програмные модули (без bitcore и rethinkdb)